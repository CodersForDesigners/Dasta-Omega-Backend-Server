
<IfModule mod_rewrite.c>

RewriteEngine On

# Get the relative URI
# RewriteCond %{ENV:RELATIVE_URI} ^$
# RewriteRule (.*) - [ENV=RELATIVE_URI:$1]
# Get the current directory
# RewriteCond %{ENV:CWD} ^$
# RewriteCond %{ENV:CWD}::%{REQUEST_URI} ^(.*)::(.*?)$
# RewriteRule ^$ - [ENV=CWD:%2]

# For Debugging
# RewriteRule (.*) https://example.com/?rel_uri=$1%{RELATIVE_URL} [R=301,L]

# Get lead based on a given phone number
RewriteCond "%{DOCUMENT_ROOT}%{REQUEST_URI}" !-f
RewriteRule ^/?get-lead$ /front-end-helpers/lead-validator/index.php [L,NC]

# Make an enquiry
RewriteCond "%{DOCUMENT_ROOT}%{REQUEST_URI}" !-f
RewriteRule ^/?enquiries$ http://localhost:9999/enquiries [P,L]

# Register
RewriteCond "%{DOCUMENT_ROOT}%{REQUEST_URI}" !-f
RewriteRule ^/?register$ /front-end-helpers/user-register/index.php [L,NC]

# Register OAuth callback
RewriteCond "%{DOCUMENT_ROOT}%{REQUEST_URI}" !-f
RewriteRule ^/?register/google/callback$ /front-end-helpers/user-register/callback-google.php [L,NC]

# Log-in
RewriteCond "%{DOCUMENT_ROOT}%{REQUEST_URI}" !-f
RewriteRule ^/?login/google/callback$ /front-end-helpers/user-login/callback-google.php [L,NC]

# Log out
RewriteCond "%{DOCUMENT_ROOT}%{REQUEST_URI}" !-f
RewriteRule ^/?logout$ /front-end-helpers/user-login/logout.php [L,NC]

# the catch-all "else" block
# forward the request to index.php; it will do the heavy-lifting
# RewriteCond "%{DOCUMENT_ROOT}%{REQUEST_URI}" !-f
# RewriteRule .? index.php [QSA,L]

</IfModule>
